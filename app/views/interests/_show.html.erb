  <script>
  $(document).ready(function() {

    $('#category-interest-buttons').on("click",".category_interest_button",function(e) {
      console.log("Button: " + $(this).val());
      ajaxReq = $.ajax({
                url: '/users/interests_handler',
                method: 'post',
                data: {"data":$(this).val()},
                dataType: 'json',
              });
      ajaxReq.done(function(response){
        var category = response["category_id"];
        if (response["action"] == 'a') {
          $("#category" + category).val("r," + response["user_id"] + "," + category)
          bgc = "#000";
          bgco = "#f6f6f6";
        } else {
          $("#category" + category).val("a," + response["user_id"] + "," + category)
          bgc = "#f6f6f6";
          bgco = "#000"
        }
        console.log("bgc is " + bgc);
        $("#category" + category).css("background-color",bgc);
        $("#category" + category).css("color",bgco);

      })
    })

    $('.activity-interest-box').on("click", ".activity-interest-button", function(e) {
      console.log("aButton: " + $(this).val());
      ajaxReq = $.ajax({
        url: '/users/activity_dislikes_handler',
        method: 'post',
        data: {"data":$(this).val()},
        dataType: 'json',
      })
      ajaxReq.done(function(response){
        var activityId = response["activity_id"];
        if (response["action"] == 'r') {
          $(".activity" + activityId).val("a," + response["user_id"] + "," + activityId);
          bgcolor = "#000";
          txtcolor = "#f6f6f6";
        } else {
          $(".activity" + activityId).val("r," + response["user_id"] + "," + activityId);
          bgcolor = "#f6f6f6";
          txtcolor = "#000";
        }
        $(".activity" + activityId).css("background-color",bgcolor);
        $(".activity" + activityId).css("color",txtcolor);
      });
    });

  });

  function toggleActivity(id) {
    $('.activity-box-for-cat' + id).toggle();
    // console.log(x);
  };

  </script>


<div class="category-interest-buttons">
    <div id="category-interest-buttons">
    <% @categories.each do |category| %>
      <% if is_interested?(category,@user) %>
      <div
        <button style="background-color: #000; color: #fff"
            id = "category<%= category.id %>"
            class = "category_interest_button"
            value = "r,<%=@user.id%>,<%=category.id %>"
            onClick="toggleActivity(<%=category.id %>)" >
          <%=category.name %>
        </button>
         <%=render partial: 'interests/activity', locals: {activities: category.associated_activities, category: category} %>

      <% else %>
        <button style="background-color: #f6f6f6; color: #000"
            id = "category<%= category.id %>"
            class = "category_interest_button"
            value = "a,<%=@user.id%>,<%=category.id %>"
            onClick="toggleActivity(<%=category.id %>)" >
          <%=category.name %>
        </button>
        <%=render partial: 'interests/activity', locals: {activities: category.associated_activities, category: category} %>
        <script>$(".activity-box-for-cat<%=category.id%>").hide();</script>

      <% end %>
      <br>
    <% end %>
    <a class="aButton" style="margin-left: -3.1em; height: 20px; width: 300px;" href="/users/<%= @user.id %>">SAVE INTERESTS</a>
    </div>
  </div>
